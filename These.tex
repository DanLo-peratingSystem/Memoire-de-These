% Choose the language of your thesis passing 'french' or 'english' as
% \documentclass option.
% Note1: The 'page de garde' will always be written in French.
% Note2: You will have an error if you change the language of the document and
%        compile it without cleaning the auxiliary files. Compiling it again
%        should solve the problem.
\documentclass[french, a4paper, 11pt, twoside, pdftex]{StyleThese}

\newcommand{\included}{}
%\overfullrule=.5cm %% GROS TRAIT NOIR quand ça dépasse de la marge !

\include{formatAndDefs}

\renewcommand\nomgroup[1]{%  % GROUPES NOMENCLATURE
	\item[\bfseries
	\ifstrequal{#1}{D}{Abréviations}{%
		\ifstrequal{#1}{A}{Modèle de Tâches}{%
			\ifstrequal{#1}{B}{Modèle de Chaîne de tâches}{%
				\ifstrequal{#1}{C}{Mécanisme de Surveillance et Contrôle}{%
		}}}}%
		]
	} 
\setlength{\nomlabelwidth}{2cm}
 
\include{_Garde}

\begin{document}

\makeflyleaf
\cleardoublepage

\dominitoc

\thispagestyle{empty}

 \cleardoublepage
%%%%%%%%%%%%%%%%%%
 %%%%% MAXIME %%%%% 
%\topskip-10cm
\vspace*{5cm}
% \begin{maxime}{Pierre-Henri Cami.}
%	Souvent une évolution est une révolution sans en avoir l'R.
%\end{maxime}
\epigraph{{\large Souvent une évolution est une révolution sans en avoir l'R.}}
{{\smallbreak\large \textit{Pierre-Henri Cami}}}
%\vspace*{\fill}

\cleardoublepage
\pagenumbering{roman}
%Another use of \if toggle can be found at the end of this file.
\IfLanguageName{english}{%
\section*{Acknowledgments}
}{%
\section*{Préface}
\addstarredchapter{Préface}
	 
	Quand j'étais au collège, je souhaitais faire interprète. Mais arrivé au Lycée, je me suis ravisé pour m'orienter vers un cursus scientifique. Je m'étais fixé de ne pas faire d'études (trop) longues, et d'aller travailler dès que possible.
	
	Force est de constater que l'objectif n'a pas été maintenu, en allant en Classes Prépa, puis l'école d'ingénieur qu'est l'ENSEEIHT. Mais toujours dans mon objectif initial, aucune chance que je continue dans la recherche ou que je fasse une thèse~: les 3 ans, le diplôme, et puis boulot dans l'industrie... Enfin, c'était en théorie.
	
	Et bien cette fois-ci encore, l'avenir m'a donné tort, avec cette proposition tant inattendue qu'intéressante de réaliser cette thèse au LAAS-CNRS avec Renault. Après un long mois de réflexion, j'ai franchi ce pas le cœur léger, et me voici aujourd'hui sans regret à regarder cette page se tourner. 
	Comme quoi, on ne sait jamais ce que l'avenir nous réserve ! Prévus comme imprévus, l'important reste de choisir ce qui correspond le mieux à ses désirs.
	
\paragraph*{}
	C'est donc avec une grande joie et un vrai sentiment d'accomplissement que j'écris ces lignes aujourd'hui. Après tant de pages dédiées au bilan de ces années de thèse passées, il est l'heure du repos et des remerciements. 
	
	Je me dois de remercier en premier lieu les différentes institutions sans qui cette thèse n'aurait pas été possible. Tout d'abord, je remercie le Technocentre Renault pour avoir proposé un sujet aussi intéressant et qui représente un vrai défi à la fois personnel et industriel. Plus spécifiquement, merci à Régis Valentin pour avoir supporté toute la charge administrative, toujours aussi légère et agréable à faire dans ce milieu (\textit{c'est faux}).  Merci aussi au LAAS-CNRS et plus particulièrement à l'équipe Tolérance aux Fautes et Sûreté de Fonctionnement Informatique (TSF) menée successivement par Mohamed Kaâniche puis Hélène Waeselynck. Vous m'avez offert un environnement de travail qui est resté agréable et épanouissant le long de ces années de labeur, ainsi que permi de mener ces travaux jusqu'à leur terme malgré les conditions que nous connaissons tous aujourd'hui (qui commence par "CO-" et se termine par "-VID"). 
	Je remercie de même l'INP-Toulouse et l'École Doctorale Système (EDSys) pour avoir mis à disposition le cadre pédagogico-institutionnel adapté à la réalisation \cmnt{sereinne et }en bonne et due forme de cette thèse. Merci à Agnan de Bonneval pour son aide et ses conseils dans les diverses procédures. 
	
	Je tiens à présenter toute ma reconnaissance envers les examinateurs et rapporteurs, qui ont eu la patience de relire mon manuscrit et être attentif à la restitutions de mes travaux. Vos avis, questions et retours détaillés et réfléchis m'ont été d'une grande aide et un très beau mot de conclusion de tout ce processus.
	Merci à Liliana Cucu-Grosjean, rapportrice, pour la vague de questions étoffées et très intéressantes que tu m'as soumis . Les discussions qui en ont abouti m'ont permis de prendre confiance sur l'horizon dessiné par les résultats de mes travaux en étoffant les discussions sur les enjeux propres à ce domaine de recherche si complexe. Navré que tu n'ai pas pu partager cet instant conclusif à nos côtés.  
	Merci à Emmanuel Grolleau, rapporteur, pour tes indications lors de notre long entretien où j'ai pris plaisir à répondre à tes questions. Merci pour tous les efforts fournis pour prendre en main et comprendre les détails de mes travaux avec des recommandations très pertinentes. 
	Merci à Claire Pagetti et Sébastien Faucou, examinateurs, pour votre écoute attentive et tous les retours que vous avez pu m'apporter. Merci à vous tous de m'avoir fait l'honneur de votre présence et de votre temps. Pour avoir rendu compte de votre expertise sur ma modeste contribution à ce grand domaine dans lequel vous avez déjà largement apporté votre marque. 
	
	Aussi, je souhaite du fond du cœur remercier mes encadrants, qui ont pu me guider, me conseiller et m'accompagner, que ce soit dans les moments difficiles mais aussi dans les périodes plus légères. 
	Merci donc à Jean-Charles Fabre pour les longues discussions que l'on a pu avoir, pour tous ces échanges sur l'enseignement, la pédagogie, mais aussi les bons restos, la science et plein d'autres sujets encore. Merci pour tes conseils avisés, pour avoir apporté ta vision et ta sagesse pour que l'on évite ensemble les trous dans la raquette durant ces travaux, comme qui dirait~! Merci aussi pour cet e-mail de Juillet 2017, qui aura été sans nul doute un tournant dans ma vie suite à un bon mois de réflexion personnelle. Tu es celui qui m'a donné goût à ce qui a occupé plus de 4 ans de ma vie par la suite, et qui a su m'amener vers ce parcours personnel que l'on ne vit qu'une fois.
	Un grand merci de même à Mickaël pour ton aide précieuse, tes conseils avisés et pour ton optimisme et ta bonne humeur toujours présents qui m'ont permis d'aller de l'avant et tenir jusqu'au bout. Merci à vous deux aussi pour vos relectures attentives et pour m'avoir supporté et soutenu pendant ces longues années de travail.
	Merci aussi à Matthieu Roy qui, malgré les difficultés, a fait de son mieux pour me conseiller et m'apporter ses retours. Je remercie de même Stéphane Korzin puis Enagnon Cédric Klikpo du Technocentre Renault ainsi que François Gœusse et Patricia Guitton-Houhamou de Renault Software Labs pour tous leurs retours techniques ainsi que le temps et l'expertise que vous avez pu me consacrer pour m'aider à mener à bien ces travaux. Merci à vous pour m'avoir conforté dans les directions prises par ma thèse en m'apportant le recul nécessaire pour trouver ma place dans l'état des lieux technologique du domaine automobile. 
	Sans vous, tout cela n'aurait pas été aussi bien, ni même possible. Et pour tout cela je vous en suis tous entièrement reconnaissant.
	
	\renewcommand{\alertColor}{\textcolor{black}}
\paragraph*{}
	Mais qu'aurait été cette thèse, sans toutes ces personnes que j'ai croisé le long du chemin~?
	Merci de tout cœur à tous mes \remove{collaborateurs} collègues, qui ont été la pierre angulaire de la bonne ambiance et du plaisir que j'ai eu à continuer le travail chaque jour \small{(ouvré, non férié, voir conditions particulières\up{a})}. Merci donc à toute l'équipe TSF, dont les permanents Hélène W., Karama K., Jérémie G., Gilles T., Vincent N. et M., Nicolas R., Guillaume A. Eric A et bien sûr Jean-Charles, Michaël et Matthieu une seconde fois... 
	\break
	...mais aussi et surtout, merci aux doctorants pour ces instants de soutien, de pauses au bureau, pour les parties de tarot, pour les LANs, et pour toutes les discussions plus profondes sur le monde de la recherche, la politique (à la fois de gauche mais aussi de gauche de la gauche), et plein d'autres sujets plus ou moins barrés ou sérieux. Donc un grand merci à William E., Lola M., Aliénor D., Christophe B., Malcolm B. et Jean I. qui ont terminé leurs aventures avant moi. 
	Mentions spéciales au trio déchanté~: Matthieu A., Jonathan R. et Guillaume A. avec qui j'ai pu passer des soirées et des week-ends de folie pour décompresser et j'espère pouvoir continuer encore longtemps... tant que mon aĝe le permet~!
		
	Merci aussi à Romain C., Lucas S., Raoul S.F., Cyrius N., Florent G., Alexis G., Maria-Laura B.M., Mohamed E.M. et Yassir I.M. qui sont arrivés en cours de route et à qui je souhaite le meilleur pour terminer leur propre aventure. 
	
	Et un grand merci et des remerciements tout particuliers à Clément R. et Rémi A.. Nous avons entamé cette aventure ensemble, coude-à-coude, et nous avons vécu des instants de rire et de partage mémorables ! Vous avez été mes piliers, mes supports, mon phare de back-up dans la brume doctorante. 
	
	Bref, pour vous tous, merci pour votre soutien, votre bonne humeur et tout simplement votre amitié.
	
	Pour finir, je souhaite remercier ma famille du fond du cœur. Mon père, ma mère, ma sœur, mais aussi ma grand-mère qui s'est levée à 5h du matin de l'autre bout du globe pour assister à la consécration de ces travaux. Vous n'avez pas forcément tout compris des péripéties de mes années de thèse, mais vous avez toujours été là pour moi, et ça compte énormément. 
	
\paragraph*{}
	Ce fut une expérience unique, qui n'aurait pas été la même sans toutes les personnes qui m'ont entouré durant ces années. Merci à vous tous que j'ai mentionné ici, et à tous ceux que j'ai probablement oublié (tel que ma coloc, merci Éléonore !), mais qui ont contribué d'une façon ou d'une autre à rendre ces dernières années plus belles qu'elles ne l'étaient déjà pour moi. \textit{Obrigado}.
	

}

\tableofcontents

\renewcommand{\listfigurename}{Liste des figures et graphiques}
\listoffigures
\addcontentsline{toc}{chapter}{\listfigurename}

\listoftables
\addcontentsline{toc}{chapter}{\listtablename}

\makenomenclature
 %%%%%%%%%%%%%%%%%%%%%%%%
{ %%%%% NOMENCLATURE %%%%%
	\nomenclature[A, 01]{$\tau_i$}{Tâche, d'indice i}
	\nomenclature[A, 03]{$T_i$}{Période d'apparition d'une tâche}
	\nomenclature[A, 04]{$D_i$}{Date limite d'échéance à la terminaison d'une tâche}
	\nomenclature[A, 05]{$C_i$}{Temps d'exécution pire cas d'une tâche}
	\nomenclature[A, 06]{$L_i$}{Niveau de criticité d'une tâche}
	\nomenclature[A, 07]{$\tau_{i,j}$}{j\up{ème} occurrence d'exécution de la tâche $\tau_i$ à sa période $T_i$}
	\nomenclature[A, 08]{$a_{i,j}$}{Moment d'activation du job $\tau_{i,j}$}
	\nomenclature[A, 09]{$s_{i,j}$}{Début d'exécution du job $\tau_{i,j}$}
	\nomenclature[A, 10]{$e_{i,j}$}{Fin d'exécution (terminaison) du job $\tau_{i,j}$}
	\nomenclature[B, 20]{$succ(\tau_i)$}{Fonction qui permet de trouver le job successeur du job $\tau_i$ d'une chaîne de tâches}
	\nomenclature[B, 21]{$succ^p(\tau_i)$}{fonction itérative pour trouver le p\up{ème} successeur du job $\tau_i$}
	\nomenclature[B, 15]{$R_j$}{Temps de réponse bout-en-bout d'une chaîne de tâches}
	\nomenclature[B, 16]{$D_c$}{Délai limite d'échéance d'exécution bout-en-bout d'une chaîne de tâche}
	\nomenclature[B, 23]{$S(t)$}{Etat de la chaîne de tâches à l'instant $t$}
	\nomenclature[B, 24]{$ET(j,t)$}{j\up{ème} trace d'exécution de la chaîne de tâches, à un instant t}
	\nomenclature[B, 30]{$RT(t)$}{Temps de réponse partiel d'une chaîne de tâche active à l'instant t}
	\nomenclature[B, 31]{$rWCRT(t)$}{Pire Temps de Réponse Restant d'une chaîne de tâche}
	\nomenclature[C, 42]{$T_{CCC}$}{Période de fonctionnement du Core Control Component}
	\nomenclature[C, 43]{$W_{MAX}$}{Durée maximale garantie entre 2 points de surveillance}
	\nomenclature[C, 44]{$t_{SW}$}{Latence de changement de mode}
	\nomenclature[C, 40]{TWC}{Task-Wrapper Component : module d'encapsulation pour la surveillance des tâches}
	\nomenclature[C, 41]{CCC}{Core Control Component : module de décision de changement de mode}
	
}

\printnomenclature
\cmnt{	% Use \mtcfixnomenclature below if you have a glossary (added with
% \printnomenclature above) and you're see a shift in the mini-table of
% contents at the begining of each chapter (example: no mini-toc in chapter 1;
% mini-toc of chapter 1 appearing in chapter 2; and so on).
%
% You should not use \mtcfixnomenclature if you have no glossary (that means,
% if you don't use \printnomenclature or if your glossary is empty). 
}
\mtcfixnomenclature


\mainmatter

\include{0_Introduction}
\include{1_Enjeux}
\include{2_StateOfArt}
\include{3_PrincipeArchi}
\include{4_ProtocolExpe}
\include{5_ImplemCase}
%\include{6_BilanExpe}

\include{_Conclusion}


%%%%%%%%%%%%%%%%%%%%%%%
 %%%% PUBLICATIONS %%%%%
\chapter*{Publications}
\addstarredchapter{Publications}
Les travaux présentés dans ce manuscrit ont été effectués à Toulouse au Laboratoire d’Analyse et d’Architecture des Systèmes (LAAS) du Centre National de la Recherche Scientifique (CNRS) au sein de l'équipe Tolérance aux Fautes et Sûreté de Fonctionnement. Ils ont été réalisés dans le cadre d'une collaboration CIFRE avec le Technocentre Renault, Guyancourt et plus spécifiquement l'équipe SW-T. À l'heure à laquelle ces lignes sont écrites, cela a donné lieu aux publications suivantes~:

\begingroup\raggedright
\begin{description}
	\item	D. Loche, M. Lauer, M. Roy, et J.-C. Fabre, « \textit{Mixed Critical Automotive Embedded Applications on Multicores: A Safe Scheduling Approach for Dependability} ». Dans 5th International Workshop on Critical Automotive Applications: Robustness \& Safety (CARS), 2019, Naples, Italy 
	\smallbreak
	\item	D. Loche, M. Lauer, M. Roy, et J.-C. Fabre, « \textit{Safe Scheduling on Multicores: an approach leveraging multi-criticality and end-to-end deadlines} ». Dans 10th European Congress on Embedded Real Time Software and Systems (ERTS 2020), 2020, Toulouse, France.
	\smallbreak	
	\item	D. Loche, A. Generes, M. Lauer, et J.-C. Fabre, « \textit{Run-time Monitoring and Control for Temporal Fault Prevention in Mixed-criticality Systems} ». Dans European Dependable Computing Conference (EDCC 2021), Intel; Fraunhofer IKS; LAAS, 2021, Munich (virtual), Germany. pp.53-60. (doi~: 10.1109/EDCC53658.2021.00015)
\end{description}
\endgroup
\vspace*{\fill}

%\appendix
\include{Annexe1}

%%%%%%%%%%%%%%%%%%%%%%%%
 %%%% BIBLIOGRAPHIE %%%%%
\hyphenation{ONLINE}
\begingroup\raggedright
\bibliographystyle{StyleThese} % or StyleTheseWithEtAl  // plain
\bibliography{these}
\endgroup

\cmnt
{ %% Tentative list Publications - foiré...
	\begin{bibunit}
		\renewcommand{\bibsection}{\large \textbf{\begin{center}
					Publications
		\end{center}}}
		\makeatletter
		\renewcommand\@biblabel[1]{}
		\makeatother
		\def\bibfont{\small}
		
		%list all the references in the publications bibtex file
		\nocite{*}
		\putbib[MyPublications]
	\end{bibunit}
}

\cleardoublepage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 %%%%% RESUMÉ - ABSTRACT %%%%%
 \newgeometry{top=3.6cm,bottom=3.6cm}

\begin{vcenterpage}
\noindent\rule[2pt]{\textwidth}{0.5pt}
\\ %%%%% RESUME EN FRANCAIS %%%%%
	{\large\textbf{Résumé :} \addstarredchapter{Résumé}
		
		L'émergence de calculateurs multicœurs plus puissants, mais aussi plus complexes, présente à la fois une opportunité et de nouveaux enjeux pour l'intégration de systèmes à criticité mixte. Ces systèmes, qui embarquent des fonctionnalités de différents niveaux d'importance, requièrent le respect d'exigences temporelles. En effet, plus un logiciel est critique, plus les conséquences en cas de dépassement d'échéance d'exécution peuvent être catastrophiques. Par conséquent, des mécanismes de sûreté de fonctionnement doivent être mis en place pour prévenir ce risque. 
		
		L'usage de calculateurs multicœurs exacerbe cette problématique avec l'exécution concurrente de tâches qui peut provoquer des interférences inter-tâches. Cela est dû au partage de ressources associées à la plateforme matérielle partagée. La mémoire, les périphériques, les bus d'accès ainsi que les espaces mémoire partagés constituent ainsi des points de congestion potentielle. Cela peut alors mener à des retards dans l'exécution de tâches critiques uniquement du fait de l'exécution parallèle de tâches à plus faible niveau de criticité. En conséquence, les risques de non-respect des exigences temps-réel deviennent d'autant plus importants sur ces processeurs. De plus, la complexité croissante des architectures matérielle rend aussi plus difficile de complètement maîtriser et prévenir en amont tout risque d'interférences.
		
		Les solutions existantes à un tel problème se font au détriment d'autres éléments qui deviennent tout autant nécessaires dans l'industrie, dont notamment la maximisation d'usage des ressources de calcul. Ainsi, notre proposition cherche à répondre à la fois au besoin de garanties temps-réel sur les tâches critiques tout en permettant une bonne utilisation des ressources offertes par les calculateurs multicœurs. Dans ce cadre, ces travaux se focalisent sur l'étude des tâches critiques sous forme de chaînes de tâches fonctionnelles. De fait chaque fonctionnalité exécutée correspond à une chaîne de différents blocs logiciels exécutés séquentiellement. Avec cette approche, on propose un mécanisme de Surveillance et de Contrôle qui offre des garanties minimales sur une chaîne de tâche critique, par anticipation de risques d'interférences qui pourraient mener à une défaillance. L'anticipation ayant pour moyen de neutralisation des interférences la mise en pause temporaire des tâches non critiques. L'objectif est d'obtenir une garantie d'exécution bout-en-bout de la chaîne de tâche sans dépassement d'échéance, avec une limitation des tâches non critiques uniquement quand nécessaire, de façon à ce que le reste du temps, on puisse exploiter au maximum la puissance de calcul et les ressources disponibles. Avec un tel mécanisme, nous proposons un protocole d'implémentation et de calibration, ainsi qu'une première analyse à partir d'une plateforme expérimentale dédiée
	}
\smallbreak
{\large\textbf{Mots clés~:} multicœur, temps-réel, criticité mixte, sûreté de fonctionnement}
\\
\noindent\rule[2pt]{\textwidth}{0.5pt}
\end{vcenterpage}
%\newpage
\begin{vcenterpage}
\noindent\rule[2pt]{\textwidth}{0.5pt}
\section*{Preventing temporal faults on multicore architectures for mixed-criticality systems}
%\\ %%%%% RESUME EN ANGLAIS %%%%%
	{\large\textbf{Abstract:}
			
		The emergence of more powerful, but also more complex, multicore computers presents both an opportunity and new challenges for the integration of mixed criticality systems. These systems, which embed functionalities of different levels of importance, require the respect of temporal requirements. Indeed, the more critical a software is, the more catastrophic the consequences in case of a missed execution deadline. Consequently, mechanisms for operational safety must be put in place to prevent this risk. 

		The use of multicore computers exacerbates this problem with the concurrent execution of tasks that can cause inter-task interference. This is due to the sharing of resources associated with the shared hardware platform. Memory, peripherals, access to buses and shared memory spaces are potential congestion points. This can lead to delays in the execution of critical tasks only due to the parallel execution of lower criticality tasks. Consequently, the risks of non-compliance with real-time requirements become even more prominent. %Moreover, the increasing complexity of hardware architectures makes it more difficult to completely control and prevent any risk of interference upstream.

		The existing solutions to such a problem are done at the expense of other elements that are becoming equally necessary in the industry, including the maximization of computing resources use. Thus, our proposal seeks to address both the need for real-time guarantees on critical tasks while allowing a good use of the resources offered by multicore computers. This thesis work focuses on the study of critical tasks modeled as functional task chains to guarantee their response times. Each functionality of the system corresponds to a chain of different software components executed sequentially. With this more functional approach to software execution, we propose a Monitoring and Control mechanism that offers guarantees on a critical task chain, by anticipating risks of interference that could lead to a failure. The anticipation consist of pausing temporarily the noncritical tasks to control and mitigate interference. The objective is to obtain a guarantee of end-to-end response time of the task chain without missing deadlines, with a limitation of interference only when necessary, so that the rest of the time, all the tasks of the system can exploit the computing power and the available resources to the maximum. 
		We propose along with such mechanism an implementation protocol and a first analysis with an experimental platform as a proof of concept to analyze the results obtained with such solution.
	}
	\smallbreak
	{\large\textbf{Keywords:} multicore, real-time, mixed-criticality, safety}
\\ %\Large\textbf{\textsc{Preventing temporal faults on multicore architectures for mixed-criticality systems}}
\noindent\rule[2pt]{\textwidth}{0.5pt}
\end{vcenterpage}

\restoregeometry
\end{document}
